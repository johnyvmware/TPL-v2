// show full graph
MATCH (n)
OPTIONAL MATCH (n)-[r]->(m)
RETURN n, r, m

// require a unique name on Category nodes
CREATE CONSTRAINT category_name_unique IF NOT EXISTS FOR (c:Category) REQUIRE c.name IS UNIQUE;

// require a definition on Category nodes
CREATE CONSTRAINT category_definition_not_null IF NOT EXISTS FOR (c:Category) REQUIRE c.definition IS UNIQUE;

// drop constraints
DROP CONSTRAINT category_name_unique IF EXISTS;
DROP CONSTRAINT category_definition_not_null IF EXISTS;

// category : Primary / Secondary

// Create main category nodes
CREATE (:Category:Primary {name: 'Housing', definition: 'Primary residence costs and non-entertainment home services.'})
CREATE (:Category:Primary {name: 'Food', definition: 'Food and beverage for consumption, excluding groceries\' non-food items.'})
CREATE (:Category:Primary {name: 'Transport', definition: 'Transportation and commuting, and private vehicle costs.'})
CREATE (:Category:Primary {name: 'Health', definition: 'Medical services and medicines.'})
CREATE (:Category:Primary {name: 'Charity', definition: 'Donations to nonprofits, religious giving, fundraisers.'})
CREATE (:Category:Primary {name: 'Education', definition: 'Learning, education materials, and education fees.'})
CREATE (:Category:Primary {name: 'Lifestyle', definition: 'Personal wear, beauty, and non-home hobbies gear.'})
CREATE (:Category:Primary {name: 'Entertainment', definition: 'Spending on cultural and social activities like dining out, cultural events, and going out for fun.'})
CREATE (:Category:Primary {name: 'Vacations', definition: 'Trips and holidays outside daily commuting.'})
CREATE (:Category:Primary {name: 'Investments', definition: 'Investments, interest, bonds and loans.'});
CREATE (:Category:Primary {name: 'Other', definition: 'No confident match to any category.'});


// Create sub categories
CREATE (:Category:Secondary {name: 'Mortgage', definition: 'Payments to mortgage lender.'})
CREATE (:Category:Secondary {name: 'Utilities', definition: 'Electricity, water, sewage, trash.'})
CREATE (:Category:Secondary {name: 'Media', definition: 'Home ISP, cable/satellite TV bundles, home phone.'})
CREATE (:Category:Secondary {name: 'Furniture', definition: 'Furniture and fixtures for the home.'})
CREATE (:Category:Secondary {name: 'Consumables', definition: 'Non-food consumables for home (cleaning, paper, detergents).'})

CREATE (:Category:Secondary {name: 'Groceries', definition: 'Supermarkets and food-only groceries.'})

CREATE (:Category:Secondary {name: 'Fuel', definition: 'Vehicle fuels.'})
CREATE (:Category:Secondary {name: 'Public Transit', definition: 'Buses, metro, train passes, trams, on-demand rides, taxis, parking facilities, meters.'})
CREATE (:Category:Secondary {name: 'Vehicle Service', definition: 'Maintenance, repairs, parts, car wash.'})

CREATE (:Category:Secondary {name: 'Doctor Clinics', definition: 'General practitioners, specialists, clinics.'})
CREATE (:Category:Secondary {name: 'Pharmacy Drugstore', definition: 'Prescription and OTC medicines.'})

CREATE (:Category:Secondary {name: 'Courses', definition: 'Tuition, course fees.'})
CREATE (:Category:Secondary {name: 'Books', definition: 'Educational books, study materials and educational platforms.'})

CREATE (:Category:Secondary {name: 'Clothing', definition: 'Apparel, shoes, tailoring.'})
CREATE (:Category:Secondary {name: 'Beauty', definition: 'Cosmetics, salons, barbers.'})
CREATE (:Category:Secondary {name: 'Gear', definition: 'Tech, sports, and hobby items for personal lifestyle use.'})

CREATE (:Category:Secondary {name: 'Recreation', definition: 'Spending on cultural events, entertainment venues, and recreational outings.'})
CREATE (:Category:Secondary {name: 'Dining', definition: 'Payments for restaurant meals, takeout, and food delivery services.'})

// Create relationships

MATCH (parent:Category {name: 'Housing'}), (child:Category {name: 'Mortgage'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);
MATCH (parent:Category {name: 'Housing'}), (child:Category {name: 'Utilities'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);
MATCH (parent:Category {name: 'Housing'}), (child:Category {name: 'Media'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);
MATCH (parent:Category {name: 'Housing'}), (child:Category {name: 'Furniture'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);
MATCH (parent:Category {name: 'Housing'}), (child:Category {name: 'Consumables'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);

MATCH (parent:Category {name: 'Food'}), (child:Category {name: 'Groceries'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);

MATCH (parent:Category {name: 'Transport'}), (child:Category {name: 'Fuel'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);
MATCH (parent:Category {name: 'Transport'}), (child:Category {name: 'Public Transit'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);
MATCH (parent:Category {name: 'Transport'}), (child:Category {name: 'Vehicle Service'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);

MATCH (parent:Category {name: 'Health'}), (child:Category {name: 'Doctor Clinics'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);
MATCH (parent:Category {name: 'Health'}), (child:Category {name: 'Pharmacy Drugstore'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);

MATCH (parent:Category {name: 'Education'}), (child:Category {name: 'Courses'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);
MATCH (parent:Category {name: 'Education'}), (child:Category {name: 'Books'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);

MATCH (parent:Category {name: 'Lifestyle'}), (child:Category {name: 'Clothing'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);
MATCH (parent:Category {name: 'Lifestyle'}), (child:Category {name: 'Beauty'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);
MATCH (parent:Category {name: 'Lifestyle'}), (child:Category {name: 'Gear'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);

MATCH (parent:Category {name: 'Entertainment'}), (child:Category {name: 'Recreation'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);
MATCH (parent:Category {name: 'Entertainment'}), (child:Category {name: 'Dining'}) CREATE (child)-[:IS_SUBCATEGORY_OF]->(parent);

// Transaction modeling
Transaction belongs to category (general or specific)